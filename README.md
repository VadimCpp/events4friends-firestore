# events4friends-firestore - о
писание базы данных

Данные сайта хранятся в firebase. Основой сайта являются услуги и анонсы мероприятий.

## Формат мероприятия

Коллекция (events)[https://console.firebase.google.com/u/0/project/events4friends/firestore/data~2Fevents]

Мероприятия создаются организаторами:

| поле        | тип    | обязательно | описание                                                                       |
| ----------- | ------ | ----------- | ------------------------------------------------------------------------------ |
| id          | строка | да          | уникальный идентификатор                                                       |
| summary     | строка | да          | короткое название мероприятия                                                  |
| description | текст  | да          | полное описание                                                                |
| isOnline    | булево | да          | true - онлайн, false - офлайн                                                  |
| location    | строка | да          | адрес мероприятия/ссылка мероприятия                                           |
| contact     | строка | да          | контакт организатора                                                           |
| name        | строка | да          | имя организатора                                                               |
| timezone    | строка | да          | часовой пояс может принимать значения '+0200'(Калининград) или '+0300'(Москва) |
| start       | строка | да          | начало, dateTime, например "2019-09-14T11:00:00", ISO-8601                     |
| end         | строка | нет         | конец, dateTime                                                                |

## Формат услуги

Коллекция (2Fservices)[https://console.firebase.google.com/u/0/project/events4friends/firestore/data~2Fservices]

Услуги предоставляю участники сообщества:

| поле        | тип    | обязательно | описание                                        |
| ----------- | ------ | ----------- | ----------------------------------------------- |
| id          | строка | да          | уникальный идентификатор                        |
| name        | строка | да          | имя того, кто оказывает услугу (обычно человек) |
| service     | текст  | да          | название услуги                                 |
| description | текст  | да          | полное описание услуги                          |
| isFree      | булево | нет         | true - услуга оказывается безоплатно            |
| instagram   | текст  | нет         | ссылка на инстаграм                             |
| website     | текст  | нет         | ссылка на сайт                                  |
| price       | число  | нет         | цена в рублях                                   |
| whatsapp    | текст  | нет         | номер в вотсапп в формате 7XXX1234567           |
| telegram    | текст  | нет         | id пользователя в телеграм                      |
| vkontakte   | текст  | нет         | ссылка на вконтакте                             |


## Идентификаторы закрепленных сообщений

В чатах месседжера Telergam можно закрепить сообщение. Эта коллекция управляется только с помощью Телеграм-бота @events4friendsbot.

Коллекция - (pinnedMessages)[https://console.firebase.google.com/u/0/project/events4friends/firestore/data~2FpinnedMessages]

| поле        | тип    | обязательно | описание                                                                       |
| ----------- | ------ | ----------- | ------------------------------------------------------------------------------ |
| communityId   | число | да          | идентификатор сообщества                                                       |
| chatName     | string | да          | ник телеграм чата                                                  |
| pinnedMessageId | число  | нет          | Id закрепленного сообщения                                          |
| date    | строка | да          | дата, когда сообщение было закреплено, например "2019-09-14", ISO-8601.    |

Так как пока реализовано только одно сообщество communityId всегда равно 1

